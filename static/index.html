<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Push Notification Dashboard</title>
    <link rel="stylesheet" href="/static/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="logo">
          <i class="ri-notification-3-fill logo-icon"></i>
          <span class="logo-text">Push Admin</span>
        </div>
        <nav class="nav">
          <a href="#" class="nav-item active" data-section="dashboard">
            <i class="ri-dashboard-line nav-icon"></i>
            <span>Dashboard</span>
          </a>
          <a href="#" class="nav-item" data-section="users">
            <i class="ri-group-line nav-icon"></i>
            <span>Users</span>
          </a>
          <a href="#" class="nav-item" data-section="send">
            <i class="ri-send-plane-line nav-icon"></i>
            <span>Send Notification</span>
          </a>
        </nav>
        <div class="sidebar-footer">
          <div class="status-indicator">
            <span class="status-dot"></span>
            <span id="server-status">Checking...</span>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
          <div class="section-header">
            <h1>Dashboard</h1>
            <button class="btn btn-secondary" onclick="refreshData()">
              <i class="ri-refresh-line"></i> Refresh
            </button>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="ri-group-line"></i>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="total-users">0</span>
                <span class="stat-label">Total Users</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="ri-smartphone-line"></i>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="total-tokens">0</span>
                <span class="stat-label">Registered Tokens</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="ri-check-double-line"></i>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="last-sent">-</span>
                <span class="stat-label">Last Notification</span>
              </div>
            </div>
          </div>

          <div class="quick-actions">
            <h2>Quick Actions</h2>
            <div class="action-buttons">
              <button class="btn btn-primary" onclick="sendTestNotification()">
                <i class="ri-rocket-line"></i> Send Test to All
              </button>
              <button class="btn btn-secondary" onclick="showSection('users')">
                <i class="ri-eye-line"></i> View All Users
              </button>
            </div>
          </div>

          <div class="recent-activity">
            <h2>Recent Users</h2>
            <div id="recent-users" class="users-list">
              <p class="loading">Loading...</p>
            </div>
          </div>
        </section>

        <!-- Users Section -->
        <section id="users" class="section">
          <div class="section-header">
            <h1>Registered Users</h1>
            <button class="btn btn-secondary" onclick="loadUsers()">
              <i class="ri-refresh-line"></i> Refresh
            </button>
          </div>

          <div class="users-table-container">
            <table class="users-table">
              <thead>
                <tr>
                  <th>User ID</th>
                  <th>Expo Token</th>
                  <th>Device</th>
                  <th>Registered</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="users-table-body">
                <tr>
                  <td colspan="5" class="loading">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Send Notification Section -->
        <section id="send" class="section">
          <div class="section-header">
            <h1>Send Notification</h1>
          </div>

          <!-- Quick Templates -->
          <div class="templates-section">
            <h2>Quick Templates</h2>
            <p class="templates-subtitle">
              Click to send instantly or use "Edit" to customize
            </p>
            <div class="templates-grid">
              <!-- Welcome -->
              <div
                class="template-card"
                data-title="Welcome! ðŸ‘‹"
                data-body="Thanks for joining us! We're excited to have you on board."
              >
                <div class="template-icon">
                  <i class="ri-hand-heart-line"></i>
                </div>
                <div class="template-content">
                  <h4>Welcome</h4>
                  <p>Greet new users</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Reminder -->
              <div
                class="template-card"
                data-title="Don't forget! â°"
                data-body="You have pending tasks waiting for you. Come back and complete them!"
              >
                <div class="template-icon"><i class="ri-alarm-line"></i></div>
                <div class="template-content">
                  <h4>Reminder</h4>
                  <p>Bring users back</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Update -->
              <div
                class="template-card"
                data-title="New Update Available ðŸš€"
                data-body="We've added exciting new features! Update now to get the best experience."
              >
                <div class="template-icon">
                  <i class="ri-download-cloud-line"></i>
                </div>
                <div class="template-content">
                  <h4>App Update</h4>
                  <p>Announce new version</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Promo -->
              <div
                class="template-card"
                data-title="Special Offer! ðŸŽ‰"
                data-body="Limited time deal just for you! Don't miss out on exclusive savings."
              >
                <div class="template-icon"><i class="ri-gift-line"></i></div>
                <div class="template-content">
                  <h4>Promotion</h4>
                  <p>Special offers & deals</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- News -->
              <div
                class="template-card"
                data-title="Breaking News ðŸ“°"
                data-body="Something important just happened! Check out the latest updates now."
              >
                <div class="template-icon">
                  <i class="ri-newspaper-line"></i>
                </div>
                <div class="template-content">
                  <h4>News Alert</h4>
                  <p>Important updates</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Maintenance -->
              <div
                class="template-card"
                data-title="Scheduled Maintenance ðŸ”§"
                data-body="We'll be performing maintenance shortly. Service may be briefly unavailable."
              >
                <div class="template-icon"><i class="ri-tools-line"></i></div>
                <div class="template-content">
                  <h4>Maintenance</h4>
                  <p>Downtime notice</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Security -->
              <div
                class="template-card"
                data-title="Security Alert ðŸ”’"
                data-body="Please review your account security settings. We recommend enabling 2FA."
              >
                <div class="template-icon">
                  <i class="ri-shield-check-line"></i>
                </div>
                <div class="template-content">
                  <h4>Security</h4>
                  <p>Security reminders</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Thank You -->
              <div
                class="template-card"
                data-title="Thank You! ðŸ’™"
                data-body="We appreciate your continued support. You're the reason we do what we do!"
              >
                <div class="template-icon"><i class="ri-heart-line"></i></div>
                <div class="template-content">
                  <h4>Thank You</h4>
                  <p>Show appreciation</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Feedback -->
              <div
                class="template-card"
                data-title="We'd love your feedback! ðŸ’¬"
                data-body="Tell us what you think. Your opinion helps us improve the app for everyone."
              >
                <div class="template-icon">
                  <i class="ri-chat-smile-line"></i>
                </div>
                <div class="template-content">
                  <h4>Feedback</h4>
                  <p>Request reviews</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Achievement -->
              <div
                class="template-card"
                data-title="Congratulations! ðŸ†"
                data-body="You've reached a new milestone! Keep up the amazing work."
              >
                <div class="template-icon"><i class="ri-trophy-line"></i></div>
                <div class="template-content">
                  <h4>Achievement</h4>
                  <p>Celebrate milestones</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Event -->
              <div
                class="template-card"
                data-title="Event Starting Soon! ðŸŽª"
                data-body="Don't miss our upcoming event. Mark your calendar and join us!"
              >
                <div class="template-icon">
                  <i class="ri-calendar-event-line"></i>
                </div>
                <div class="template-content">
                  <h4>Event</h4>
                  <p>Event announcements</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>

              <!-- Tips -->
              <div
                class="template-card"
                data-title="Pro Tip ðŸ’¡"
                data-body="Did you know? Here's a helpful tip to get more out of the app!"
              >
                <div class="template-icon">
                  <i class="ri-lightbulb-line"></i>
                </div>
                <div class="template-content">
                  <h4>Tips & Tricks</h4>
                  <p>Share helpful hints</p>
                </div>
                <div class="template-actions">
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="sendTemplate(this)"
                  >
                    <i class="ri-send-plane-fill"></i> Send
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="editTemplate(this)"
                  >
                    <i class="ri-edit-line"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Custom Form -->
          <div class="custom-form-section">
            <h2>Custom Notification</h2>
            <div class="send-form-container">
              <form id="notification-form" class="notification-form">
                <div class="form-group">
                  <label for="target">Send To</label>
                  <select
                    id="target"
                    name="target"
                    onchange="toggleUserSelect()"
                  >
                    <option value="all">All Users</option>
                    <option value="specific">Specific User</option>
                  </select>
                </div>

                <div
                  class="form-group"
                  id="user-select-group"
                  style="display: none"
                >
                  <label for="user-id">Select User</label>
                  <select id="user-id" name="user-id">
                    <option value="">Loading users...</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="title">Title</label>
                  <input
                    type="text"
                    id="title"
                    name="title"
                    placeholder="Notification title"
                    value="Hello!"
                  />
                </div>

                <div class="form-group">
                  <label for="body">Message</label>
                  <textarea
                    id="body"
                    name="body"
                    rows="4"
                    placeholder="Notification message"
                  >
This is a notification from your app!</textarea
                  >
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary btn-lg">
                    <i class="ri-send-plane-fill"></i> Send Notification
                  </button>
                </div>
              </form>

              <div class="preview-card">
                <h3>Preview</h3>
                <div class="notification-preview">
                  <div class="preview-header">
                    <i class="ri-notification-3-fill preview-icon"></i>
                    <span class="preview-app">Your App</span>
                    <span class="preview-time">now</span>
                  </div>
                  <div class="preview-title" id="preview-title">Hello!</div>
                  <div class="preview-body" id="preview-body">
                    This is a notification from your app!
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="/static/script.js"></script>
  </body>
</html>
